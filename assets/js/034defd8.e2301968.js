"use strict";(self.webpackChunkwida_fe_docs_test=self.webpackChunkwida_fe_docs_test||[]).push([[769],{9791:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"state-management","title":"State Management","description":"Component level state.","source":"@site/docs/state-management.md","sourceDirName":".","slug":"/state-management","permalink":"/docusarus-fe-guideline-sandbox/state-management","draft":false,"unlisted":false,"editUrl":"https://github.com/fazzaamiarso/docusarus-fe-guideline-sandbox/docs/state-management.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"sidebar_label":"State Management","title":"State Management"},"sidebar":"default","previous":{"title":"Testing","permalink":"/docusarus-fe-guideline-sandbox/testing"},"next":{"title":"Performance Optimization","permalink":"/docusarus-fe-guideline-sandbox/performance-optimization"}}');var a=s(4848),i=s(8453);const r={sidebar_position:8,sidebar_label:"State Management",title:"State Management"},o=void 0,l={},d=[{value:"Component level state.",id:"component-level-state",level:2},{value:"Most of the time use <code>useState</code>  or <code>useReducer</code>",id:"most-of-the-time-use-usestate--or-usereducer",level:3},{value:"Make use of the react re-rendering capabilities to derive state.",id:"make-use-of-the-react-re-rendering-capabilities-to-derive-state",level:3},{value:"Global State",id:"global-state",level:2},{value:"Server State",id:"server-state",level:2},{value:"Form state",id:"form-state",level:2},{value:"URL State",id:"url-state",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"component-level-state",children:"Component level state."}),"\n",(0,a.jsxs)(t.h3,{id:"most-of-the-time-use-usestate--or-usereducer",children:["Most of the time use ",(0,a.jsx)(t.code,{children:"useState"}),"  or ",(0,a.jsx)(t.code,{children:"useReducer"})]}),"\n",(0,a.jsxs)(t.p,{children:["Great reference when to use each: ",(0,a.jsx)(t.a,{href:"https://kentcdodds.com/blog/should-i-usestate-or-usereducer",children:"https://kentcdodds.com/blog/should-i-usestate-or-usereducer"})]}),"\n",(0,a.jsx)(t.h3,{id:"make-use-of-the-react-re-rendering-capabilities-to-derive-state",children:"Make use of the react re-rendering capabilities to derive state."}),"\n",(0,a.jsx)(t.p,{children:"Most of the time we can create a derived state based on the state that we have instead of creating new state."}),"\n",(0,a.jsx)(t.p,{children:"Common mistakes is to create new state to store filtered data. In this case, we actually ensure the original and filtered state stay synchronized. In actual, we can just derived it since we can filter on render"}),"\n",(0,a.jsxs)(t.p,{children:["Read this article for more detail: ",(0,a.jsx)(t.a,{href:"https://kentcdodds.com/blog/dont-sync-state-derive-it",children:"https://kentcdodds.com/blog/dont-sync-state-derive-it"})]}),"\n",(0,a.jsx)(t.h2,{id:"global-state",children:"Global State"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Context + hooks"}),"\n",(0,a.jsx)(t.li,{children:"Zustand"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"server-state",children:"Server State"}),"\n",(0,a.jsxs)(t.p,{children:["We use ",(0,a.jsx)(t.code,{children:"tanstack-query"})," for fetching server related data and it\u2019s currently the general best practice when building with Single Page Application (SPA)"]}),"\n",(0,a.jsx)(t.p,{children:"One of the advantage is it manages the in-memory cache for our data and handles edge cases when dealing with async code pretty well."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"IMPORTANT: since by default it uses cache, we MUST invalidate the cache after mutation to prevent stale data."}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["For best understanding, it is recommended to read this series of article around the best practices for ",(0,a.jsx)(t.code,{children:"tanstack-query"})," from the Maintainer. References: ",(0,a.jsx)(t.a,{href:"https://tkdodo.eu/blog/practical-react-query",children:"https://tkdodo.eu/blog/practical-react-query"})]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"infinite scroll function"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"form-state",children:"Form state"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"react-hook-form"}),"  for managing the state"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"zod"})," for building the schema and validation."]}),"\n",(0,a.jsx)(t.li,{children:"MUST create the inferred types for from Zod."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Common Pattern is"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"const userSchema = z.object({ firstName: z.string(), age: z.number() })\nconst UserRegistrationFormValues = z.infer<typeof userSchema>\n\nconst form = useForm<UserRegistrationFormValues>({ zodResolver: userSchema, defaultValues: { ... } })\n"})}),"\n",(0,a.jsx)(t.h2,{id:"url-state",children:"URL State"}),"\n",(0,a.jsxs)(t.p,{children:["We should store shareable state in URL, which is \xa0",(0,a.jsx)(t.em,{children:"any state shared between 2 users that with a link"}),"."]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"If user A shares a link with user B, their account info will be different of course, query parameters or tab selection should be shared as they provide consistent UI."}),"\n",(0,a.jsx)(t.li,{children:"Theme state (light/dark mode), could technically be shared as well, but probably shouldn't be, as it would provide inconsistent UX (eg. user B is in dark mode, opens link which switches to light theme)."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Common Use Case:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Table Pagination, Sorting, Filtering. By using URL, we don\u2019t need manage the save the state like pagination to storage because we can just go back and browser will still have the history intact."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var n=s(6540);const a={},i=n.createContext(a);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);